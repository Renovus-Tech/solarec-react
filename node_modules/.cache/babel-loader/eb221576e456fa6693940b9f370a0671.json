{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('chart.js')) : typeof define === 'function' && define.amd ? define(['exports', 'chart.js'], factory) : (global = global || self, factory(global.ChartBoxPlot = {}, global.Chart));\n})(this, function (exports, Chart) {\n  'use strict';\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n      return;\n    }\n\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  } // See <http://en.wikipedia.org/wiki/Kernel_(statistics)>.\n\n\n  function gaussian(u) {\n    return 1 / Math.sqrt(2 * Math.PI) * Math.exp(-.5 * u * u);\n  } // Welford's algorithm.\n\n\n  function mean(x) {\n    var n = x.length;\n    if (n === 0) return NaN;\n    var m = 0,\n        i = -1;\n\n    while (++i < n) {\n      m += (x[i] - m) / (i + 1);\n    }\n\n    return m;\n  } // Also known as the sample variance, where the denominator is n - 1.\n\n\n  function variance(x) {\n    var n = x.length;\n    if (n < 1) return NaN;\n    if (n === 1) return 0;\n    var mean$1 = mean(x),\n        i = -1,\n        s = 0;\n\n    while (++i < n) {\n      var v = x[i] - mean$1;\n      s += v * v;\n    }\n\n    return s / (n - 1);\n  }\n\n  function ascending(a, b) {\n    return a - b;\n  }\n\n  function quantiles(d, quantiles) {\n    d = d.slice().sort(ascending);\n    var n_1 = d.length - 1;\n    return quantiles.map(function (q) {\n      if (q === 0) return d[0];else if (q === 1) return d[n_1];\n      var index = 1 + q * n_1,\n          lo = Math.floor(index),\n          h = index - lo,\n          a = d[lo - 1];\n      return h === 0 ? a : a + h * (d[lo] - a);\n    });\n  }\n\n  function iqr(x) {\n    var quartiles = quantiles(x, [.25, .75]);\n    return quartiles[1] - quartiles[0];\n  } // Visualization. Wiley.\n\n\n  function nrd(x) {\n    var h = iqr(x) / 1.34;\n    return 1.06 * Math.min(Math.sqrt(variance(x)), h) * Math.pow(x.length, -1 / 5);\n  }\n\n  function functor(v) {\n    return typeof v === \"function\" ? v : function () {\n      return v;\n    };\n  }\n\n  function kde() {\n    var kernel = gaussian,\n        sample = [],\n        bandwidth = nrd;\n\n    function kde(points, i) {\n      var bw = bandwidth.call(this, sample);\n      return points.map(function (x) {\n        var i = -1,\n            y = 0,\n            n = sample.length;\n\n        while (++i < n) {\n          y += kernel((x - sample[i]) / bw);\n        }\n\n        return [x, y / bw / n];\n      });\n    }\n\n    kde.kernel = function (x) {\n      if (!arguments.length) return kernel;\n      kernel = x;\n      return kde;\n    };\n\n    kde.sample = function (x) {\n      if (!arguments.length) return sample;\n      sample = x;\n      return kde;\n    };\n\n    kde.bandwidth = function (x) {\n      if (!arguments.length) return bandwidth;\n      bandwidth = functor(x);\n      return kde;\n    };\n\n    return kde;\n  } // https://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population\n\n\n  function quantilesType7(arr) {\n    var n1 = arr.length - 1;\n\n    var compute = function compute(q) {\n      var index = 1 + q * n1;\n      var lo = Math.floor(index);\n      var h = index - lo;\n      var a = arr[lo - 1];\n      return h === 0 ? a : a + h * (arr[lo] - a);\n    };\n\n    return {\n      min: arr[0],\n      q1: compute(0.25),\n      median: compute(0.5),\n      q3: compute(0.75),\n      max: arr[n1]\n    };\n  }\n  /**\n   * The hinges equal the quartiles for odd n (where n <- length(x))\n   * and differ for even n. Whereas the quartiles only equal observations\n   * for n %% 4 == 1 (n = 1 mod 4), the hinges do so additionally\n   * for n %% 4 == 2 (n = 2 mod 4), and are in the middle of\n   * two observations otherwise.\n   * @param {number[]} arr sorted array\n   */\n\n\n  function fivenum(arr) {\n    // based on R fivenum\n    var n = arr.length; // assuming R 1 index system, so arr[1] is the first element\n\n    var n4 = Math.floor((n + 3) / 2) / 2;\n\n    var compute = function compute(d) {\n      return 0.5 * (arr[Math.floor(d) - 1] + arr[Math.ceil(d) - 1]);\n    };\n\n    return {\n      min: arr[0],\n      q1: compute(n4),\n      median: compute((n + 1) / 2),\n      q3: compute(n + 1 - n4),\n      max: arr[n - 1]\n    };\n  }\n  /**\n   * compute the whiskers\n   * @param boxplot\n   * @param {number[]} arr sorted array\n   * @param {number} coef\n   */\n\n\n  function whiskers(boxplot, arr) {\n    var coef = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1.5;\n    var iqr = boxplot.q3 - boxplot.q1; // since top left is max\n\n    var coefValid = typeof coef === 'number' && coef > 0;\n    var whiskerMin = coefValid ? Math.max(boxplot.min, boxplot.q1 - coef * iqr) : boxplot.min;\n    var whiskerMax = coefValid ? Math.min(boxplot.max, boxplot.q3 + coef * iqr) : boxplot.max;\n\n    if (Array.isArray(arr)) {\n      // compute the closest real element\n      for (var i = 0; i < arr.length; i++) {\n        var v = arr[i];\n\n        if (v >= whiskerMin) {\n          whiskerMin = v;\n          break;\n        }\n      }\n\n      for (var _i = arr.length - 1; _i >= 0; _i--) {\n        var _v = arr[_i];\n\n        if (_v <= whiskerMax) {\n          whiskerMax = _v;\n          break;\n        }\n      }\n    }\n\n    return {\n      whiskerMin: whiskerMin,\n      whiskerMax: whiskerMax\n    };\n  }\n\n  var defaultStatsOptions = {\n    coef: 1.5,\n    quantiles: 7\n  };\n\n  function determineStatsOptions(options) {\n    var coef = options == null || typeof options.coef !== 'number' ? defaultStatsOptions.coef : options.coef;\n    var q = options == null ? null : options.quantiles;\n    var quantiles = typeof q === 'function' ? q : q === 'hinges' || q === 'fivenum' ? fivenum : quantilesType7;\n    return {\n      coef: coef,\n      quantiles: quantiles\n    };\n  }\n\n  function boxplotStats(arr, options) {\n    // console.assert(Array.isArray(arr));\n    if (arr.length === 0) {\n      return {\n        min: NaN,\n        max: NaN,\n        median: NaN,\n        q1: NaN,\n        q3: NaN,\n        whiskerMin: NaN,\n        whiskerMax: NaN,\n        outliers: []\n      };\n    }\n\n    arr = arr.filter(function (v) {\n      return typeof v === 'number' && !isNaN(v);\n    });\n    arr.sort(function (a, b) {\n      return a - b;\n    });\n\n    var _determineStatsOption = determineStatsOptions(options),\n        quantiles = _determineStatsOption.quantiles,\n        coef = _determineStatsOption.coef;\n\n    var stats = quantiles(arr);\n\n    var _whiskers = whiskers(stats, arr, coef),\n        whiskerMin = _whiskers.whiskerMin,\n        whiskerMax = _whiskers.whiskerMax;\n\n    stats.outliers = arr.filter(function (v) {\n      return v < whiskerMin || v > whiskerMax;\n    });\n    stats.whiskerMin = whiskerMin;\n    stats.whiskerMax = whiskerMax;\n    return stats;\n  }\n\n  function violinStats(arr, options) {\n    // console.assert(Array.isArray(arr));\n    if (arr.length === 0) {\n      return {};\n    }\n\n    arr = arr.filter(function (v) {\n      return typeof v === 'number' && !isNaN(v);\n    });\n    arr.sort(function (a, b) {\n      return a - b;\n    });\n\n    var _determineStatsOption2 = determineStatsOptions(options),\n        quantiles = _determineStatsOption2.quantiles;\n\n    var stats = quantiles(arr);\n    stats.kde = kde().sample(arr);\n    return stats;\n  }\n\n  function asBoxPlotStats(value, options) {\n    if (!value) {\n      return null;\n    }\n\n    if (typeof value.median === 'number' && typeof value.q1 === 'number' && typeof value.q3 === 'number') {\n      // sounds good, check for helper\n      if (typeof value.whiskerMin === 'undefined') {\n        var _determineStatsOption3 = determineStatsOptions(options),\n            coef = _determineStatsOption3.coef;\n\n        var _whiskers2 = whiskers(value, Array.isArray(value.items) ? value.items.slice().sort(function (a, b) {\n          return a - b;\n        }) : null, coef),\n            whiskerMin = _whiskers2.whiskerMin,\n            whiskerMax = _whiskers2.whiskerMax;\n\n        value.whiskerMin = whiskerMin;\n        value.whiskerMax = whiskerMax;\n      }\n\n      return value;\n    }\n\n    if (!Array.isArray(value)) {\n      return undefined;\n    }\n\n    if (value.__stats === undefined) {\n      value.__stats = boxplotStats(value, options);\n    }\n\n    return value.__stats;\n  }\n\n  function asViolinStats(value, options) {\n    if (!value) {\n      return null;\n    }\n\n    if (typeof value.median === 'number' && (typeof value.kde === 'function' || Array.isArray(value.coords))) {\n      return value;\n    }\n\n    if (!Array.isArray(value)) {\n      return undefined;\n    }\n\n    if (value.__kde === undefined) {\n      value.__kde = violinStats(value, options);\n    }\n\n    return value.__kde;\n  }\n\n  function asValueStats(value, minStats, maxStats, options) {\n    if (typeof value[minStats] === 'number' && typeof value[maxStats] === 'number') {\n      return value;\n    }\n\n    if (!Array.isArray(value) || value.length === 0) {\n      return undefined;\n    }\n\n    return asBoxPlotStats(value, options);\n  }\n\n  function getRightValue(rawValue, options) {\n    if (!rawValue) {\n      return rawValue;\n    }\n\n    if (typeof rawValue === 'number' || typeof rawValue === 'string') {\n      return Number(rawValue);\n    }\n\n    var b = asBoxPlotStats(rawValue, options);\n    return b ? b.median : rawValue;\n  }\n\n  var commonScaleOptions = {\n    ticks: _objectSpread2({\n      minStats: 'min',\n      maxStats: 'max'\n    }, defaultStatsOptions)\n  };\n\n  function commonDataLimits(extraCallback) {\n    var _this = this;\n\n    var chart = this.chart;\n    var isHorizontal = this.isHorizontal();\n    var _this$options$ticks = this.options.ticks,\n        minStats = _this$options$ticks.minStats,\n        maxStats = _this$options$ticks.maxStats;\n\n    var matchID = function matchID(meta) {\n      return isHorizontal ? meta.xAxisID === _this.id : meta.yAxisID === _this.id;\n    }; // First Calculate the range\n\n\n    this.min = null;\n    this.max = null; // Regular charts use x, y values\n    // For the boxplot chart we have rawValue.min and rawValue.max for each point\n\n    chart.data.datasets.forEach(function (d, i) {\n      var meta = chart.getDatasetMeta(i);\n\n      if (!chart.isDatasetVisible(i) || !matchID(meta)) {\n        return;\n      }\n\n      d.data.forEach(function (value, j) {\n        if (value == null || meta.data[j].hidden) {\n          return;\n        }\n\n        var stats = asValueStats(value, minStats, maxStats, _this.options.ticks);\n        var minValue;\n        var maxValue;\n\n        if (stats) {\n          minValue = stats[minStats];\n          maxValue = stats[maxStats];\n        } else {\n          // if stats are not available use the plain value\n          var parsed = +_this.getRightValue(value);\n\n          if (isNaN(parsed)) {\n            return;\n          }\n\n          minValue = maxValue = parsed;\n        }\n\n        if (_this.min === null || minValue < _this.min) {\n          _this.min = minValue;\n        }\n\n        if (_this.max === null || maxValue > _this.max) {\n          _this.max = maxValue;\n        }\n\n        if (extraCallback) {\n          extraCallback(stats);\n        }\n      });\n    });\n  }\n\n  function rnd(seed) {\n    // Adapted from http://indiegamr.com/generate-repeatable-random-numbers-in-js/\n    if (seed === undefined) {\n      seed = Date.now();\n    }\n\n    return function () {\n      seed = (seed * 9301 + 49297) % 233280;\n      return seed / 233280;\n    };\n  }\n\n  var defaults = _objectSpread2({}, Chart.defaults.global.elements.rectangle, {\n    borderWidth: 1,\n    outlierRadius: 2,\n    outlierColor: Chart.defaults.global.elements.rectangle.backgroundColor,\n    medianColor: null,\n    itemRadius: 0,\n    itemStyle: 'circle',\n    itemBackgroundColor: Chart.defaults.global.elements.rectangle.backgroundColor,\n    itemBorderColor: Chart.defaults.global.elements.rectangle.borderColor,\n    hitPadding: 2,\n    outlierHitRadius: 4,\n    tooltipDecimals: 2\n  });\n\n  var ArrayElementBase = Chart.Element.extend({\n    isVertical: function isVertical() {\n      return this._view.width !== undefined;\n    },\n    draw: function draw() {// abstract\n    },\n    _drawItems: function _drawItems(vm, container, ctx, vert) {\n      if (vm.itemRadius <= 0 || !container.items || container.items.length <= 0) {\n        return;\n      }\n\n      ctx.save();\n      ctx.strokeStle = vm.itemBorderColor;\n      ctx.fillStyle = vm.itemBackgroundColor; // jitter based on random data\n      // use the datesetindex and index to initialize the random number generator\n\n      var random = rnd(this._datasetIndex * 1000 + this._index);\n\n      if (vert) {\n        container.items.forEach(function (v) {\n          Chart.canvasHelpers.drawPoint(ctx, vm.itemStyle, vm.itemRadius, vm.x - vm.width / 2 + random() * vm.width, v);\n        });\n      } else {\n        container.items.forEach(function (v) {\n          Chart.canvasHelpers.drawPoint(ctx, vm.itemStyle, vm.itemRadius, v, vm.y - vm.height / 2 + random() * vm.height);\n        });\n      }\n\n      ctx.restore();\n    },\n    _drawOutliers: function _drawOutliers(vm, container, ctx, vert) {\n      if (vm.outlierRadius <= 0 || !container.outliers || container.outliers.length === 0) {\n        return;\n      }\n\n      ctx.fillStyle = vm.outlierColor;\n      ctx.beginPath();\n\n      if (vert) {\n        container.outliers.forEach(function (v) {\n          ctx.arc(vm.x, v, vm.outlierRadius, 0, Math.PI * 2);\n        });\n      } else {\n        container.outliers.forEach(function (v) {\n          ctx.arc(v, vm.y, vm.outlierRadius, 0, Math.PI * 2);\n        });\n      }\n\n      ctx.fill();\n      ctx.closePath();\n    },\n    _getBounds: function _getBounds() {\n      // abstract\n      return {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n      };\n    },\n    _getHitBounds: function _getHitBounds() {\n      var padding = this._view.hitPadding;\n\n      var b = this._getBounds();\n\n      return {\n        left: b.left - padding,\n        top: b.top - padding,\n        right: b.right + padding,\n        bottom: b.bottom + padding\n      };\n    },\n    height: function height() {\n      return 0; // abstract\n    },\n    inRange: function inRange(mouseX, mouseY) {\n      if (!this._view) {\n        return false;\n      }\n\n      return this._boxInRange(mouseX, mouseY) || this._outlierIndexInRange(mouseX, mouseY) >= 0;\n    },\n    inLabelRange: function inLabelRange(mouseX, mouseY) {\n      if (!this._view) {\n        return false;\n      }\n\n      var bounds = this._getHitBounds();\n\n      if (this.isVertical()) {\n        return mouseX >= bounds.left && mouseX <= bounds.right;\n      }\n\n      return mouseY >= bounds.top && mouseY <= bounds.bottom;\n    },\n    inXRange: function inXRange(mouseX) {\n      var bounds = this._getHitBounds();\n\n      return mouseX >= bounds.left && mouseX <= bounds.right;\n    },\n    inYRange: function inYRange(mouseY) {\n      var bounds = this._getHitBounds();\n\n      return mouseY >= bounds.top && mouseY <= bounds.bottom;\n    },\n    _outlierIndexInRange: function _outlierIndexInRange(mouseX, mouseY) {\n      var vm = this._view;\n      var hitRadius = vm.outlierHitRadius;\n\n      var outliers = this._getOutliers();\n\n      var vertical = this.isVertical(); // check if along the outlier line\n\n      if (vertical && Math.abs(mouseX - vm.x) > hitRadius || !vertical && Math.abs(mouseY - vm.y) > hitRadius) {\n        return -1;\n      }\n\n      var toCompare = vertical ? mouseY : mouseX;\n\n      for (var i = 0; i < outliers.length; i++) {\n        if (Math.abs(outliers[i] - toCompare) <= hitRadius) {\n          return i;\n        }\n      }\n\n      return -1;\n    },\n    _boxInRange: function _boxInRange(mouseX, mouseY) {\n      var bounds = this._getHitBounds();\n\n      return mouseX >= bounds.left && mouseX <= bounds.right && mouseY >= bounds.top && mouseY <= bounds.bottom;\n    },\n    getCenterPoint: function getCenterPoint() {\n      var _this$_view = this._view,\n          x = _this$_view.x,\n          y = _this$_view.y;\n      return {\n        x: x,\n        y: y\n      };\n    },\n    getArea: function getArea() {\n      return 0; // abstract\n    },\n    _getOutliers: function _getOutliers() {\n      return []; // abstract\n    },\n    tooltipPosition: function tooltipPosition(eventPosition, tooltip) {\n      if (!eventPosition) {\n        // fallback\n        return this.getCenterPoint();\n      }\n\n      delete tooltip._tooltipOutlier;\n      var vm = this._view;\n\n      var index = this._outlierIndexInRange(eventPosition.x, eventPosition.y);\n\n      if (index < 0) {\n        return this.getCenterPoint();\n      }\n\n      tooltip._tooltipOutlier = index;\n\n      if (this.isVertical()) {\n        return {\n          x: vm.x,\n          y: this._getOutliers()[index]\n        };\n      }\n\n      return {\n        x: this._getOutliers()[index],\n        y: vm.y\n      };\n    }\n  });\n  Chart.defaults.global.elements.boxandwhiskers = _objectSpread2({}, defaults);\n\n  function transitionBoxPlot(start, view, model, ease) {\n    var keys = Object.keys(model);\n\n    for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {\n      var key = _keys[_i];\n      var target = model[key];\n      var origin = start[key];\n\n      if (origin === target) {\n        continue;\n      }\n\n      if (typeof target === 'number') {\n        view[key] = origin + (target - origin) * ease;\n        continue;\n      }\n\n      if (Array.isArray(target)) {\n        var v = view[key];\n        var common = Math.min(target.length, origin.length);\n\n        for (var i = 0; i < common; ++i) {\n          v[i] = origin[i] + (target[i] - origin[i]) * ease;\n        }\n      }\n    }\n  }\n\n  var BoxAndWiskers = Chart.elements.BoxAndWhiskers = ArrayElementBase.extend({\n    transition: function transition(ease) {\n      var r = Chart.Element.prototype.transition.call(this, ease);\n      var model = this._model;\n      var start = this._start;\n      var view = this._view; // No animation -> No Transition\n\n      if (!model || ease === 1) {\n        return r;\n      }\n\n      if (start.boxplot == null) {\n        return r; // model === view -> not copied\n      } // create deep copy to avoid alternation\n\n\n      if (model.boxplot === view.boxplot) {\n        view.boxplot = Chart.helpers.clone(view.boxplot);\n      }\n\n      transitionBoxPlot(start.boxplot, view.boxplot, model.boxplot, ease);\n      return r;\n    },\n    draw: function draw() {\n      var ctx = this._chart.ctx;\n      var vm = this._view;\n      var boxplot = vm.boxplot;\n      var vert = this.isVertical();\n\n      this._drawItems(vm, boxplot, ctx, vert);\n\n      ctx.save();\n      ctx.fillStyle = vm.backgroundColor;\n      ctx.strokeStyle = vm.borderColor;\n      ctx.lineWidth = vm.borderWidth;\n\n      this._drawBoxPlot(vm, boxplot, ctx, vert);\n\n      this._drawOutliers(vm, boxplot, ctx, vert);\n\n      ctx.restore();\n    },\n    _drawBoxPlot: function _drawBoxPlot(vm, boxplot, ctx, vert) {\n      if (vert) {\n        this._drawBoxPlotVert(vm, boxplot, ctx);\n      } else {\n        this._drawBoxPlotHoriz(vm, boxplot, ctx);\n      }\n    },\n    _drawBoxPlotVert: function _drawBoxPlotVert(vm, boxplot, ctx) {\n      var x = vm.x;\n      var width = vm.width;\n      var x0 = x - width / 2; // Draw the q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.fillRect(x0, boxplot.q1, width, boxplot.q3 - boxplot.q1);\n      } else {\n        ctx.fillRect(x0, boxplot.q3, width, boxplot.q1 - boxplot.q3);\n      } // Draw the median line\n\n\n      ctx.save();\n\n      if (vm.medianColor) {\n        ctx.strokeStyle = vm.medianColor;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(x0, boxplot.median);\n      ctx.lineTo(x0 + width, boxplot.median);\n      ctx.closePath();\n      ctx.stroke();\n      ctx.restore(); // Draw the border around the main q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.strokeRect(x0, boxplot.q1, width, boxplot.q3 - boxplot.q1);\n      } else {\n        ctx.strokeRect(x0, boxplot.q3, width, boxplot.q1 - boxplot.q3);\n      } // Draw the whiskers\n\n\n      ctx.beginPath();\n      ctx.moveTo(x0, boxplot.whiskerMin);\n      ctx.lineTo(x0 + width, boxplot.whiskerMin);\n      ctx.moveTo(x, boxplot.whiskerMin);\n      ctx.lineTo(x, boxplot.q1);\n      ctx.moveTo(x0, boxplot.whiskerMax);\n      ctx.lineTo(x0 + width, boxplot.whiskerMax);\n      ctx.moveTo(x, boxplot.whiskerMax);\n      ctx.lineTo(x, boxplot.q3);\n      ctx.closePath();\n      ctx.stroke();\n    },\n    _drawBoxPlotHoriz: function _drawBoxPlotHoriz(vm, boxplot, ctx) {\n      var y = vm.y;\n      var height = vm.height;\n      var y0 = y - height / 2; // Draw the q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.fillRect(boxplot.q1, y0, boxplot.q3 - boxplot.q1, height);\n      } else {\n        ctx.fillRect(boxplot.q3, y0, boxplot.q1 - boxplot.q3, height);\n      } // Draw the median line\n\n\n      ctx.save();\n\n      if (vm.medianColor) {\n        ctx.strokeStyle = vm.medianColor;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(boxplot.median, y0);\n      ctx.lineTo(boxplot.median, y0 + height);\n      ctx.closePath();\n      ctx.stroke();\n      ctx.restore(); // Draw the border around the main q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.strokeRect(boxplot.q1, y0, boxplot.q3 - boxplot.q1, height);\n      } else {\n        ctx.strokeRect(boxplot.q3, y0, boxplot.q1 - boxplot.q3, height);\n      } // Draw the whiskers\n\n\n      ctx.beginPath();\n      ctx.moveTo(boxplot.whiskerMin, y0);\n      ctx.lineTo(boxplot.whiskerMin, y0 + height);\n      ctx.moveTo(boxplot.whiskerMin, y);\n      ctx.lineTo(boxplot.q1, y);\n      ctx.moveTo(boxplot.whiskerMax, y0);\n      ctx.lineTo(boxplot.whiskerMax, y0 + height);\n      ctx.moveTo(boxplot.whiskerMax, y);\n      ctx.lineTo(boxplot.q3, y);\n      ctx.closePath();\n      ctx.stroke();\n    },\n    _getBounds: function _getBounds() {\n      var vm = this._view;\n      var vert = this.isVertical();\n      var boxplot = vm.boxplot;\n\n      if (!boxplot) {\n        return {\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0\n        };\n      }\n\n      if (vert) {\n        var x = vm.x,\n            width = vm.width;\n        var x0 = x - width / 2;\n        return {\n          left: x0,\n          top: boxplot.whiskerMax,\n          right: x0 + width,\n          bottom: boxplot.whiskerMin\n        };\n      }\n\n      var y = vm.y,\n          height = vm.height;\n      var y0 = y - height / 2;\n      return {\n        left: boxplot.whiskerMin,\n        top: y0,\n        right: boxplot.whiskerMax,\n        bottom: y0 + height\n      };\n    },\n    height: function height() {\n      var vm = this._view;\n      return vm.base - Math.min(vm.boxplot.q1, vm.boxplot.q3);\n    },\n    getArea: function getArea() {\n      var vm = this._view;\n      var iqr = Math.abs(vm.boxplot.q3 - vm.boxplot.q1);\n\n      if (this.isVertical()) {\n        return iqr * vm.width;\n      }\n\n      return iqr * vm.height;\n    },\n    _getOutliers: function _getOutliers() {\n      return this._view.boxplot ? this._view.boxplot.outliers || [] : [];\n    }\n  });\n  Chart.defaults.global.elements.violin = _objectSpread2({\n    points: 100\n  }, defaults);\n\n  function transitionViolin(start, view, model, ease) {\n    var keys = Object.keys(model);\n\n    for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {\n      var key = _keys[_i];\n      var target = model[key];\n      var origin = start[key];\n\n      if (origin === target) {\n        continue;\n      }\n\n      if (typeof target === 'number') {\n        view[key] = origin + (target - origin) * ease;\n        continue;\n      }\n\n      if (key === 'coords') {\n        var v = view[key];\n        var common = Math.min(target.length, origin.length);\n\n        for (var i = 0; i < common; ++i) {\n          v[i].v = origin[i].v + (target[i].v - origin[i].v) * ease;\n          v[i].estimate = origin[i].estimate + (target[i].estimate - origin[i].estimate) * ease;\n        }\n      }\n    }\n  }\n\n  var Violin = Chart.elements.Violin = ArrayElementBase.extend({\n    transition: function transition(ease) {\n      var r = Chart.Element.prototype.transition.call(this, ease);\n      var model = this._model;\n      var start = this._start;\n      var view = this._view; // No animation -> No Transition\n\n      if (!model || ease === 1) {\n        return r;\n      }\n\n      if (start.violin == null) {\n        return r; // model === view -> not copied\n      } // create deep copy to avoid alternation\n\n\n      if (model.violin === view.violin) {\n        view.violin = Chart.helpers.clone(view.violin);\n      }\n\n      transitionViolin(start.violin, view.violin, model.violin, ease);\n      return r;\n    },\n    draw: function draw() {\n      var ctx = this._chart.ctx;\n      var vm = this._view;\n      var violin = vm.violin;\n      var vert = this.isVertical();\n\n      this._drawItems(vm, violin, ctx, vert);\n\n      ctx.save();\n      ctx.fillStyle = vm.backgroundColor;\n      ctx.strokeStyle = vm.borderColor;\n      ctx.lineWidth = vm.borderWidth;\n      var coords = violin.coords;\n      Chart.canvasHelpers.drawPoint(ctx, 'rectRot', 5, vm.x, vm.y);\n      ctx.stroke();\n      ctx.beginPath();\n\n      if (vert) {\n        var x = vm.x;\n        var width = vm.width;\n        var factor = width / 2 / violin.maxEstimate;\n        ctx.moveTo(x, violin.min);\n        coords.forEach(function (_ref) {\n          var v = _ref.v,\n              estimate = _ref.estimate;\n          ctx.lineTo(x - estimate * factor, v);\n        });\n        ctx.lineTo(x, violin.max);\n        ctx.moveTo(x, violin.min);\n        coords.forEach(function (_ref2) {\n          var v = _ref2.v,\n              estimate = _ref2.estimate;\n          ctx.lineTo(x + estimate * factor, v);\n        });\n        ctx.lineTo(x, violin.max);\n      } else {\n        var y = vm.y;\n        var height = vm.height;\n\n        var _factor = height / 2 / violin.maxEstimate;\n\n        ctx.moveTo(violin.min, y);\n        coords.forEach(function (_ref3) {\n          var v = _ref3.v,\n              estimate = _ref3.estimate;\n          ctx.lineTo(v, y - estimate * _factor);\n        });\n        ctx.lineTo(violin.max, y);\n        ctx.moveTo(violin.min, y);\n        coords.forEach(function (_ref4) {\n          var v = _ref4.v,\n              estimate = _ref4.estimate;\n          ctx.lineTo(v, y + estimate * _factor);\n        });\n        ctx.lineTo(violin.max, y);\n      }\n\n      ctx.stroke();\n      ctx.fill();\n      ctx.closePath();\n\n      this._drawOutliers(vm, violin, ctx, vert);\n\n      ctx.restore();\n    },\n    _getBounds: function _getBounds() {\n      var vm = this._view;\n      var vert = this.isVertical();\n      var violin = vm.violin;\n\n      if (vert) {\n        var x = vm.x,\n            width = vm.width;\n        var x0 = x - width / 2;\n        return {\n          left: x0,\n          top: violin.max,\n          right: x0 + width,\n          bottom: violin.min\n        };\n      }\n\n      var y = vm.y,\n          height = vm.height;\n      var y0 = y - height / 2;\n      return {\n        left: violin.min,\n        top: y0,\n        right: violin.max,\n        bottom: y0 + height\n      };\n    },\n    height: function height() {\n      var vm = this._view;\n      return vm.base - Math.min(vm.violin.min, vm.violin.max);\n    },\n    getArea: function getArea() {\n      var vm = this._view;\n      var iqr = Math.abs(vm.violin.max - vm.violin.min);\n\n      if (this.isVertical()) {\n        return iqr * vm.width;\n      }\n\n      return iqr * vm.height;\n    },\n    _getOutliers: function _getOutliers() {\n      return this._view.violin.outliers || [];\n    }\n  });\n  var verticalDefaults = {\n    scales: {\n      yAxes: [{\n        type: 'arrayLinear'\n      }]\n    }\n  };\n  var horizontalDefaults = {\n    scales: {\n      xAxes: [{\n        type: 'arrayLinear'\n      }]\n    }\n  };\n\n  function toFixed(value) {\n    var decimals = this._chart.config.options.tooltipDecimals; // inject number of decimals from config\n\n    if (decimals == null || typeof decimals !== 'number' || decimals < 0) {\n      return value;\n    }\n\n    return Number.parseFloat(value).toFixed(decimals);\n  }\n\n  var configKeys = ['outlierRadius', 'itemRadius', 'itemStyle', 'itemBackgroundColor', 'itemBorderColor', 'outlierColor', 'medianColor', 'hitPadding', 'outlierHitRadius'];\n  var configKeyIsColor = [false, false, false, true, true, true, true, false, false];\n  var array = {\n    _elementOptions: function _elementOptions() {\n      return {};\n    },\n    updateElement: function updateElement(elem, index, reset) {\n      var dataset = this.getDataset();\n      var custom = elem.custom || {};\n\n      var options = this._elementOptions();\n\n      Chart.controllers.bar.prototype.updateElement.call(this, elem, index, reset);\n      var resolve = Chart.helpers.options.resolve; // Scriptable options\n\n      var context = {\n        chart: this.chart,\n        dataIndex: index,\n        dataset: dataset,\n        datasetIndex: this.index\n      };\n      configKeys.forEach(function (item) {\n        elem._model[item] = resolve([custom[item], dataset[item], options[item]], context, index);\n      });\n    },\n    _calculateCommonModel: function _calculateCommonModel(r, data, container, scale) {\n      if (container.outliers) {\n        r.outliers = container.outliers.map(function (d) {\n          return scale.getPixelForValue(Number(d));\n        });\n      }\n\n      if (Array.isArray(data)) {\n        r.items = data.map(function (d) {\n          return scale.getPixelForValue(Number(d));\n        });\n      } else if (container.items) {\n        r.items = container.items.map(function (d) {\n          return scale.getPixelForValue(Number(d));\n        });\n      }\n    },\n    setHoverStyle: function setHoverStyle(element) {\n      Chart.controllers.bar.prototype.setHoverStyle.call(this, element);\n      var dataset = this.chart.data.datasets[element._datasetIndex];\n      var index = element._index;\n      var custom = element.custom || {};\n      var model = element._model;\n      var getHoverColor = Chart.helpers.getHoverColor;\n      var resolve = Chart.helpers.options.resolve;\n      configKeys.forEach(function (item, i) {\n        element.$previousStyle[item] = model[item];\n        var hoverKey = \"hover\".concat(item.charAt(0).toUpperCase()).concat(item.slice(1));\n        var modelValue = configKeyIsColor[i] && model[item] != null ? getHoverColor(model[item]) : model[item];\n        element._model[item] = resolve([custom[hoverKey], dataset[hoverKey], modelValue], undefined, index);\n      });\n    }\n  };\n\n  function boxplotTooltip(item, data) {\n    var value = data.datasets[item.datasetIndex].data[item.index];\n\n    var options = this._chart.getDatasetMeta(item.datasetIndex).controller._getValueScale().options.ticks;\n\n    var b = asBoxPlotStats(value, options);\n    var hoveredOutlierIndex = this._tooltipOutlier == null ? -1 : this._tooltipOutlier;\n    var label = this._options.callbacks.boxplotLabel;\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return label.apply(this, [item, data, b, hoveredOutlierIndex].concat(args));\n  }\n\n  var defaults$1 = {\n    tooltips: {\n      position: 'boxplot',\n      callbacks: {\n        label: boxplotTooltip,\n        boxplotLabel: function boxplotLabel(item, data, b, hoveredOutlierIndex) {\n          var datasetLabel = data.datasets[item.datasetIndex].label || '';\n          var label = \"\".concat(datasetLabel, \" \").concat(typeof item.xLabel === 'string' ? item.xLabel : item.yLabel);\n\n          if (!b) {\n            return \"\".concat(label, \" (NaN)\");\n          }\n\n          if (hoveredOutlierIndex >= 0) {\n            var outlier = b.outliers[hoveredOutlierIndex];\n            return \"\".concat(label, \" (outlier: \").concat(toFixed.call(this, outlier), \")\");\n          }\n\n          return \"\".concat(label, \" (min: \").concat(toFixed.call(this, b.min), \", q1: \").concat(toFixed.call(this, b.q1), \", median: \").concat(toFixed.call(this, b.median), \", q3: \").concat(toFixed.call(this, b.q3), \", max: \").concat(toFixed.call(this, b.max), \")\");\n        }\n      }\n    }\n  };\n  Chart.defaults.boxplot = Chart.helpers.merge({}, [Chart.defaults.bar, verticalDefaults, defaults$1]);\n  Chart.defaults.horizontalBoxplot = Chart.helpers.merge({}, [Chart.defaults.horizontalBar, horizontalDefaults, defaults$1]);\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.bar) {\n    Chart.defaults.global.datasets.boxplot = _objectSpread2({}, Chart.defaults.global.datasets.bar);\n  }\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.horizontalBar) {\n    Chart.defaults.global.datasets.horizontalBoxplot = _objectSpread2({}, Chart.defaults.global.datasets.horizontalBar);\n  }\n\n  var boxplot = _objectSpread2({}, array, {\n    dataElementType: Chart.elements.BoxAndWhiskers,\n    _elementOptions: function _elementOptions() {\n      return this.chart.options.elements.boxandwhiskers;\n    },\n\n    /**\n     * @private\n     */\n    _updateElementGeometry: function _updateElementGeometry(elem, index, reset) {\n      var _Chart$controllers$ba;\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n        args[_key2 - 3] = arguments[_key2];\n      }\n\n      (_Chart$controllers$ba = Chart.controllers.bar.prototype._updateElementGeometry).call.apply(_Chart$controllers$ba, [this, elem, index, reset].concat(args));\n\n      elem._model.boxplot = this._calculateBoxPlotValuesPixels(this.index, index);\n    },\n\n    /**\n     * @private\n     */\n    _calculateBoxPlotValuesPixels: function _calculateBoxPlotValuesPixels(datasetIndex, index) {\n      var scale = this._getValueScale();\n\n      var data = this.chart.data.datasets[datasetIndex].data[index];\n\n      if (!data) {\n        return null;\n      }\n\n      var v = asBoxPlotStats(data, scale.options.ticks);\n      var r = {};\n      Object.keys(v).forEach(function (key) {\n        if (key !== 'outliers' && key !== 'items') {\n          r[key] = scale.getPixelForValue(Number(v[key]));\n        }\n      });\n\n      this._calculateCommonModel(r, data, v, scale);\n\n      return r;\n    }\n  });\n  /**\n   * This class is based off controller.bar.js from the upstream Chart.js library\n   */\n\n\n  var BoxPlot = Chart.controllers.boxplot = Chart.controllers.bar.extend(boxplot);\n  var HorizontalBoxPlot = Chart.controllers.horizontalBoxplot = Chart.controllers.horizontalBar.extend(boxplot);\n\n  function violinTooltip(item, data) {\n    var value = data.datasets[item.datasetIndex].data[item.index];\n\n    var options = this._chart.getDatasetMeta(item.datasetIndex).controller._getValueScale().options.ticks;\n\n    var v = asViolinStats(value, options);\n    var label = this._options.callbacks.violinLabel;\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return label.apply(this, [item, data, v].concat(args));\n  }\n\n  var defaults$2 = {\n    tooltips: {\n      callbacks: {\n        label: violinTooltip,\n        violinLabel: function violinLabel(item, data) {\n          var datasetLabel = data.datasets[item.datasetIndex].label || '';\n          var value = item.value;\n          var label = \"\".concat(datasetLabel, \" \").concat(typeof item.xLabel === 'string' ? item.xLabel : item.yLabel);\n          return \"\".concat(label, \" (\").concat(toFixed.call(this, value), \")\");\n        }\n      }\n    }\n  };\n  Chart.defaults.violin = Chart.helpers.merge({}, [Chart.defaults.bar, verticalDefaults, defaults$2]);\n  Chart.defaults.horizontalViolin = Chart.helpers.merge({}, [Chart.defaults.horizontalBar, horizontalDefaults, defaults$2]);\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.bar) {\n    Chart.defaults.global.datasets.violin = _objectSpread2({}, Chart.defaults.global.datasets.bar);\n  }\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.horizontalBar) {\n    Chart.defaults.global.datasets.horizontalViolin = _objectSpread2({}, Chart.defaults.global.datasets.horizontalBar);\n  }\n\n  var controller = _objectSpread2({}, array, {\n    dataElementType: Chart.elements.Violin,\n    _elementOptions: function _elementOptions() {\n      return this.chart.options.elements.violin;\n    },\n\n    /**\n     * @private\n     */\n    _updateElementGeometry: function _updateElementGeometry(elem, index, reset) {\n      var _Chart$controllers$ba;\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n        args[_key2 - 3] = arguments[_key2];\n      }\n\n      (_Chart$controllers$ba = Chart.controllers.bar.prototype._updateElementGeometry).call.apply(_Chart$controllers$ba, [this, elem, index, reset].concat(args));\n\n      var custom = elem.custom || {};\n\n      var options = this._elementOptions();\n\n      elem._model.violin = this._calculateViolinValuesPixels(this.index, index, custom.points !== undefined ? custom.points : options.points);\n    },\n\n    /**\n     * @private\n     */\n    _calculateViolinValuesPixels: function _calculateViolinValuesPixels(datasetIndex, index, points) {\n      var scale = this._getValueScale();\n\n      var data = this.chart.data.datasets[datasetIndex].data[index];\n      var violin = asViolinStats(data, scale.options.ticks);\n\n      if (!Array.isArray(data) && typeof data === 'number' && !Number.isNaN || violin == null) {\n        return {\n          min: data,\n          max: data,\n          median: data,\n          coords: [{\n            v: data,\n            estimate: Number.NEGATIVE_INFINITY\n          }],\n          maxEstimate: Number.NEGATIVE_INFINITY\n        };\n      }\n\n      var range = violin.max - violin.min;\n      var samples = [];\n      var inc = range / points;\n\n      for (var v = violin.min; v <= violin.max && inc > 0; v += inc) {\n        samples.push(v);\n      }\n\n      if (samples[samples.length - 1] !== violin.max) {\n        samples.push(violin.max);\n      }\n\n      var coords = violin.coords || violin.kde(samples).map(function (v) {\n        return {\n          v: v[0],\n          estimate: v[1]\n        };\n      });\n      var r = {\n        min: scale.getPixelForValue(violin.min),\n        max: scale.getPixelForValue(violin.max),\n        median: scale.getPixelForValue(violin.median),\n        coords: coords.map(function (_ref) {\n          var v = _ref.v,\n              estimate = _ref.estimate;\n          return {\n            v: scale.getPixelForValue(v),\n            estimate: estimate\n          };\n        }),\n        maxEstimate: coords.reduce(function (a, d) {\n          return Math.max(a, d.estimate);\n        }, Number.NEGATIVE_INFINITY)\n      };\n\n      this._calculateCommonModel(r, data, violin, scale);\n\n      return r;\n    }\n  });\n  /**\n   * This class is based off controller.bar.js from the upstream Chart.js library\n   */\n\n\n  var Violin$1 = Chart.controllers.violin = Chart.controllers.bar.extend(controller);\n  var HorizontalViolin = Chart.controllers.horizontalViolin = Chart.controllers.horizontalBar.extend(controller);\n  var helpers = Chart.helpers;\n  var ArrayLinearScaleOptions = helpers.merge({}, [commonScaleOptions, Chart.scaleService.getScaleDefaults('linear')]);\n  var ArrayLinearScale = Chart.scaleService.getScaleConstructor('linear').extend({\n    getRightValue: function getRightValue$1(rawValue) {\n      return Chart.LinearScaleBase.prototype.getRightValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    _parseValue: function _parseValue(rawValue) {\n      return Chart.LinearScaleBase.prototype._parseValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    determineDataLimits: function determineDataLimits() {\n      commonDataLimits.call(this); // Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\n\n      this.handleTickRangeOptions();\n    }\n  });\n  Chart.scaleService.registerScaleType('arrayLinear', ArrayLinearScale, ArrayLinearScaleOptions);\n  var helpers$1 = Chart.helpers;\n  var ArrayLogarithmicScaleOptions = helpers$1.merge({}, [commonScaleOptions, Chart.scaleService.getScaleDefaults('logarithmic')]);\n  var ArrayLogarithmicScale = Chart.scaleService.getScaleConstructor('logarithmic').extend({\n    getRightValue: function getRightValue$1(rawValue) {\n      return Chart.LinearScaleBase.prototype.getRightValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    _parseValue: function _parseValue(rawValue) {\n      return Chart.LinearScaleBase.prototype._parseValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    determineDataLimits: function determineDataLimits() {\n      var _this = this; // Add whitespace around bars. Axis shouldn't go exactly from min to max\n\n\n      var tickOpts = this.options.ticks;\n      this.minNotZero = null;\n      commonDataLimits.call(this, function (boxPlot) {\n        var value = boxPlot[tickOpts.minStats];\n\n        if (value !== 0 && (_this.minNotZero === null || value < _this.minNotZero)) {\n          _this.minNotZero = value;\n        }\n      });\n      this.min = helpers$1.valueOrDefault(tickOpts.min, this.min - this.min * 0.05);\n      this.max = helpers$1.valueOrDefault(tickOpts.max, this.max + this.max * 0.05);\n\n      if (this.min === this.max) {\n        if (this.min !== 0 && this.min !== null) {\n          this.min = Math.pow(10, Math.floor(helpers$1.log10(this.min)) - 1);\n          this.max = Math.pow(10, Math.floor(helpers$1.log10(this.max)) + 1);\n        } else {\n          this.min = 1;\n          this.max = 10;\n        }\n      }\n    }\n  });\n  Chart.scaleService.registerScaleType('arrayLogarithmic', ArrayLogarithmicScale, ArrayLogarithmicScaleOptions);\n\n  function boxplotPositioner(elements, eventPosition) {\n    var _this = this;\n\n    if (!elements.length) {\n      return false;\n    }\n\n    var _elements$reduce = elements.reduce(function (_ref, el) {\n      var _ref2 = _slicedToArray(_ref, 3),\n          xi = _ref2[0],\n          ci = _ref2[1],\n          counti = _ref2[2];\n\n      if (el && el.hasValue()) {\n        var pos = el.tooltipPosition(eventPosition, _this);\n        return [xi + pos.x, ci + pos.y, counti + 1];\n      }\n\n      return [xi, ci, counti];\n    }, [0, 0, 0]),\n        _elements$reduce2 = _slicedToArray(_elements$reduce, 3),\n        x = _elements$reduce2[0],\n        y = _elements$reduce2[1],\n        count = _elements$reduce2[2];\n\n    return {\n      x: x / count,\n      y: y / count\n    };\n  }\n\n  Chart.Tooltip.positioners.boxplot = boxplotPositioner;\n  exports.ArrayLinearScale = ArrayLinearScale;\n  exports.ArrayLogarithmicScale = ArrayLogarithmicScale;\n  exports.BoxAndWhiskers = BoxAndWiskers;\n  exports.BoxPlot = BoxPlot;\n  exports.HorizontalBoxPlot = HorizontalBoxPlot;\n  exports.HorizontalViolin = HorizontalViolin;\n  exports.Violin = Violin;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["C:/Users/nicob/Desktop/Renovus/renovus/falconer_ui_web/node_modules/chartjs-chart-box-and-violin-plot/build/Chart.BoxPlot.js"],"names":["global","factory","exports","module","require","define","amd","self","ChartBoxPlot","Chart","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","Symbol","iterator","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","err","TypeError","gaussian","u","Math","sqrt","PI","exp","mean","x","n","NaN","m","variance","mean$1","s","v","ascending","a","b","quantiles","d","slice","sort","n_1","map","q","index","lo","floor","h","iqr","quartiles","nrd","min","pow","functor","kde","kernel","sample","bandwidth","points","bw","y","quantilesType7","n1","compute","q1","median","q3","max","fivenum","n4","ceil","whiskers","boxplot","coef","coefValid","whiskerMin","whiskerMax","_v","defaultStatsOptions","determineStatsOptions","options","boxplotStats","outliers","isNaN","_determineStatsOption","stats","_whiskers","violinStats","_determineStatsOption2","asBoxPlotStats","_determineStatsOption3","_whiskers2","items","__stats","asViolinStats","coords","__kde","asValueStats","minStats","maxStats","getRightValue","rawValue","Number","commonScaleOptions","ticks","commonDataLimits","extraCallback","_this","chart","isHorizontal","_this$options$ticks","matchID","meta","xAxisID","id","yAxisID","data","datasets","getDatasetMeta","isDatasetVisible","j","hidden","minValue","maxValue","parsed","rnd","seed","Date","now","defaults","elements","rectangle","borderWidth","outlierRadius","outlierColor","backgroundColor","medianColor","itemRadius","itemStyle","itemBackgroundColor","itemBorderColor","borderColor","hitPadding","outlierHitRadius","tooltipDecimals","ArrayElementBase","Element","extend","isVertical","_view","width","draw","_drawItems","vm","container","ctx","vert","save","strokeStle","fillStyle","random","_datasetIndex","_index","canvasHelpers","drawPoint","height","restore","_drawOutliers","beginPath","arc","fill","closePath","_getBounds","left","top","right","bottom","_getHitBounds","padding","inRange","mouseX","mouseY","_boxInRange","_outlierIndexInRange","inLabelRange","bounds","inXRange","inYRange","hitRadius","_getOutliers","vertical","abs","toCompare","getCenterPoint","_this$_view","getArea","tooltipPosition","eventPosition","tooltip","_tooltipOutlier","boxandwhiskers","transitionBoxPlot","start","view","model","ease","_keys","origin","common","BoxAndWiskers","BoxAndWhiskers","transition","r","_model","_start","helpers","clone","_chart","strokeStyle","lineWidth","_drawBoxPlot","_drawBoxPlotVert","_drawBoxPlotHoriz","x0","fillRect","moveTo","lineTo","stroke","strokeRect","y0","base","violin","transitionViolin","estimate","Violin","factor","maxEstimate","_ref","_ref2","_factor","_ref3","_ref4","verticalDefaults","scales","yAxes","type","horizontalDefaults","xAxes","toFixed","decimals","config","parseFloat","configKeys","configKeyIsColor","array","_elementOptions","updateElement","elem","reset","dataset","getDataset","custom","controllers","bar","resolve","context","dataIndex","datasetIndex","item","_calculateCommonModel","scale","getPixelForValue","setHoverStyle","element","getHoverColor","$previousStyle","hoverKey","concat","charAt","toUpperCase","modelValue","boxplotTooltip","controller","_getValueScale","hoveredOutlierIndex","label","_options","callbacks","boxplotLabel","_len","args","_key","defaults$1","tooltips","position","datasetLabel","xLabel","yLabel","outlier","merge","horizontalBoxplot","horizontalBar","dataElementType","_updateElementGeometry","_Chart$controllers$ba","_len2","_key2","_calculateBoxPlotValuesPixels","BoxPlot","HorizontalBoxPlot","violinTooltip","violinLabel","defaults$2","horizontalViolin","_calculateViolinValuesPixels","NEGATIVE_INFINITY","range","samples","inc","reduce","Violin$1","HorizontalViolin","ArrayLinearScaleOptions","scaleService","getScaleDefaults","ArrayLinearScale","getScaleConstructor","getRightValue$1","LinearScaleBase","_parseValue","determineDataLimits","handleTickRangeOptions","registerScaleType","helpers$1","ArrayLogarithmicScaleOptions","ArrayLogarithmicScale","tickOpts","minNotZero","boxPlot","valueOrDefault","log10","boxplotPositioner","_elements$reduce","el","xi","ci","counti","hasValue","pos","_elements$reduce2","count","Tooltip","positioners"],"mappings":"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","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('chart.js')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'chart.js'], factory) :\n  (global = global || self, factory(global.ChartBoxPlot = {}, global.Chart));\n}(this, function (exports, Chart) { 'use strict';\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n      return;\n    }\n\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n\n  // See <http://en.wikipedia.org/wiki/Kernel_(statistics)>.\n  function gaussian(u) {\n    return 1 / Math.sqrt(2 * Math.PI) * Math.exp(-.5 * u * u);\n  }\n\n  // Welford's algorithm.\n  function mean(x) {\n    var n = x.length;\n    if (n === 0) return NaN;\n    var m = 0,\n        i = -1;\n\n    while (++i < n) {\n      m += (x[i] - m) / (i + 1);\n    }\n\n    return m;\n  }\n\n  // Also known as the sample variance, where the denominator is n - 1.\n\n  function variance(x) {\n    var n = x.length;\n    if (n < 1) return NaN;\n    if (n === 1) return 0;\n    var mean$1 = mean(x),\n        i = -1,\n        s = 0;\n\n    while (++i < n) {\n      var v = x[i] - mean$1;\n      s += v * v;\n    }\n\n    return s / (n - 1);\n  }\n\n  function ascending(a, b) {\n    return a - b;\n  }\n\n  function quantiles(d, quantiles) {\n    d = d.slice().sort(ascending);\n    var n_1 = d.length - 1;\n    return quantiles.map(function (q) {\n      if (q === 0) return d[0];else if (q === 1) return d[n_1];\n      var index = 1 + q * n_1,\n          lo = Math.floor(index),\n          h = index - lo,\n          a = d[lo - 1];\n      return h === 0 ? a : a + h * (d[lo] - a);\n    });\n  }\n\n  function iqr(x) {\n    var quartiles = quantiles(x, [.25, .75]);\n    return quartiles[1] - quartiles[0];\n  }\n\n  // Visualization. Wiley.\n\n  function nrd(x) {\n    var h = iqr(x) / 1.34;\n    return 1.06 * Math.min(Math.sqrt(variance(x)), h) * Math.pow(x.length, -1 / 5);\n  }\n\n  function functor(v) {\n    return typeof v === \"function\" ? v : function () {\n      return v;\n    };\n  }\n\n  function kde() {\n    var kernel = gaussian,\n        sample = [],\n        bandwidth = nrd;\n\n    function kde(points, i) {\n      var bw = bandwidth.call(this, sample);\n      return points.map(function (x) {\n        var i = -1,\n            y = 0,\n            n = sample.length;\n\n        while (++i < n) {\n          y += kernel((x - sample[i]) / bw);\n        }\n\n        return [x, y / bw / n];\n      });\n    }\n\n    kde.kernel = function (x) {\n      if (!arguments.length) return kernel;\n      kernel = x;\n      return kde;\n    };\n\n    kde.sample = function (x) {\n      if (!arguments.length) return sample;\n      sample = x;\n      return kde;\n    };\n\n    kde.bandwidth = function (x) {\n      if (!arguments.length) return bandwidth;\n      bandwidth = functor(x);\n      return kde;\n    };\n\n    return kde;\n  }\n\n  // https://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population\n\n  function quantilesType7(arr) {\n    var n1 = arr.length - 1;\n\n    var compute = function compute(q) {\n      var index = 1 + q * n1;\n      var lo = Math.floor(index);\n      var h = index - lo;\n      var a = arr[lo - 1];\n      return h === 0 ? a : a + h * (arr[lo] - a);\n    };\n\n    return {\n      min: arr[0],\n      q1: compute(0.25),\n      median: compute(0.5),\n      q3: compute(0.75),\n      max: arr[n1]\n    };\n  }\n  /**\n   * The hinges equal the quartiles for odd n (where n <- length(x))\n   * and differ for even n. Whereas the quartiles only equal observations\n   * for n %% 4 == 1 (n = 1 mod 4), the hinges do so additionally\n   * for n %% 4 == 2 (n = 2 mod 4), and are in the middle of\n   * two observations otherwise.\n   * @param {number[]} arr sorted array\n   */\n\n  function fivenum(arr) {\n    // based on R fivenum\n    var n = arr.length; // assuming R 1 index system, so arr[1] is the first element\n\n    var n4 = Math.floor((n + 3) / 2) / 2;\n\n    var compute = function compute(d) {\n      return 0.5 * (arr[Math.floor(d) - 1] + arr[Math.ceil(d) - 1]);\n    };\n\n    return {\n      min: arr[0],\n      q1: compute(n4),\n      median: compute((n + 1) / 2),\n      q3: compute(n + 1 - n4),\n      max: arr[n - 1]\n    };\n  }\n  /**\n   * compute the whiskers\n   * @param boxplot\n   * @param {number[]} arr sorted array\n   * @param {number} coef\n   */\n\n  function whiskers(boxplot, arr) {\n    var coef = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1.5;\n    var iqr = boxplot.q3 - boxplot.q1; // since top left is max\n\n    var coefValid = typeof coef === 'number' && coef > 0;\n    var whiskerMin = coefValid ? Math.max(boxplot.min, boxplot.q1 - coef * iqr) : boxplot.min;\n    var whiskerMax = coefValid ? Math.min(boxplot.max, boxplot.q3 + coef * iqr) : boxplot.max;\n\n    if (Array.isArray(arr)) {\n      // compute the closest real element\n      for (var i = 0; i < arr.length; i++) {\n        var v = arr[i];\n\n        if (v >= whiskerMin) {\n          whiskerMin = v;\n          break;\n        }\n      }\n\n      for (var _i = arr.length - 1; _i >= 0; _i--) {\n        var _v = arr[_i];\n\n        if (_v <= whiskerMax) {\n          whiskerMax = _v;\n          break;\n        }\n      }\n    }\n\n    return {\n      whiskerMin: whiskerMin,\n      whiskerMax: whiskerMax\n    };\n  }\n  var defaultStatsOptions = {\n    coef: 1.5,\n    quantiles: 7\n  };\n\n  function determineStatsOptions(options) {\n    var coef = options == null || typeof options.coef !== 'number' ? defaultStatsOptions.coef : options.coef;\n    var q = options == null ? null : options.quantiles;\n    var quantiles = typeof q === 'function' ? q : q === 'hinges' || q === 'fivenum' ? fivenum : quantilesType7;\n    return {\n      coef: coef,\n      quantiles: quantiles\n    };\n  }\n\n  function boxplotStats(arr, options) {\n    // console.assert(Array.isArray(arr));\n    if (arr.length === 0) {\n      return {\n        min: NaN,\n        max: NaN,\n        median: NaN,\n        q1: NaN,\n        q3: NaN,\n        whiskerMin: NaN,\n        whiskerMax: NaN,\n        outliers: []\n      };\n    }\n\n    arr = arr.filter(function (v) {\n      return typeof v === 'number' && !isNaN(v);\n    });\n    arr.sort(function (a, b) {\n      return a - b;\n    });\n\n    var _determineStatsOption = determineStatsOptions(options),\n        quantiles = _determineStatsOption.quantiles,\n        coef = _determineStatsOption.coef;\n\n    var stats = quantiles(arr);\n\n    var _whiskers = whiskers(stats, arr, coef),\n        whiskerMin = _whiskers.whiskerMin,\n        whiskerMax = _whiskers.whiskerMax;\n\n    stats.outliers = arr.filter(function (v) {\n      return v < whiskerMin || v > whiskerMax;\n    });\n    stats.whiskerMin = whiskerMin;\n    stats.whiskerMax = whiskerMax;\n    return stats;\n  }\n  function violinStats(arr, options) {\n    // console.assert(Array.isArray(arr));\n    if (arr.length === 0) {\n      return {};\n    }\n\n    arr = arr.filter(function (v) {\n      return typeof v === 'number' && !isNaN(v);\n    });\n    arr.sort(function (a, b) {\n      return a - b;\n    });\n\n    var _determineStatsOption2 = determineStatsOptions(options),\n        quantiles = _determineStatsOption2.quantiles;\n\n    var stats = quantiles(arr);\n    stats.kde = kde().sample(arr);\n    return stats;\n  }\n  function asBoxPlotStats(value, options) {\n    if (!value) {\n      return null;\n    }\n\n    if (typeof value.median === 'number' && typeof value.q1 === 'number' && typeof value.q3 === 'number') {\n      // sounds good, check for helper\n      if (typeof value.whiskerMin === 'undefined') {\n        var _determineStatsOption3 = determineStatsOptions(options),\n            coef = _determineStatsOption3.coef;\n\n        var _whiskers2 = whiskers(value, Array.isArray(value.items) ? value.items.slice().sort(function (a, b) {\n          return a - b;\n        }) : null, coef),\n            whiskerMin = _whiskers2.whiskerMin,\n            whiskerMax = _whiskers2.whiskerMax;\n\n        value.whiskerMin = whiskerMin;\n        value.whiskerMax = whiskerMax;\n      }\n\n      return value;\n    }\n\n    if (!Array.isArray(value)) {\n      return undefined;\n    }\n\n    if (value.__stats === undefined) {\n      value.__stats = boxplotStats(value, options);\n    }\n\n    return value.__stats;\n  }\n  function asViolinStats(value, options) {\n    if (!value) {\n      return null;\n    }\n\n    if (typeof value.median === 'number' && (typeof value.kde === 'function' || Array.isArray(value.coords))) {\n      return value;\n    }\n\n    if (!Array.isArray(value)) {\n      return undefined;\n    }\n\n    if (value.__kde === undefined) {\n      value.__kde = violinStats(value, options);\n    }\n\n    return value.__kde;\n  }\n  function asValueStats(value, minStats, maxStats, options) {\n    if (typeof value[minStats] === 'number' && typeof value[maxStats] === 'number') {\n      return value;\n    }\n\n    if (!Array.isArray(value) || value.length === 0) {\n      return undefined;\n    }\n\n    return asBoxPlotStats(value, options);\n  }\n  function getRightValue(rawValue, options) {\n    if (!rawValue) {\n      return rawValue;\n    }\n\n    if (typeof rawValue === 'number' || typeof rawValue === 'string') {\n      return Number(rawValue);\n    }\n\n    var b = asBoxPlotStats(rawValue, options);\n    return b ? b.median : rawValue;\n  }\n  var commonScaleOptions = {\n    ticks: _objectSpread2({\n      minStats: 'min',\n      maxStats: 'max'\n    }, defaultStatsOptions)\n  };\n  function commonDataLimits(extraCallback) {\n    var _this = this;\n\n    var chart = this.chart;\n    var isHorizontal = this.isHorizontal();\n    var _this$options$ticks = this.options.ticks,\n        minStats = _this$options$ticks.minStats,\n        maxStats = _this$options$ticks.maxStats;\n\n    var matchID = function matchID(meta) {\n      return isHorizontal ? meta.xAxisID === _this.id : meta.yAxisID === _this.id;\n    }; // First Calculate the range\n\n\n    this.min = null;\n    this.max = null; // Regular charts use x, y values\n    // For the boxplot chart we have rawValue.min and rawValue.max for each point\n\n    chart.data.datasets.forEach(function (d, i) {\n      var meta = chart.getDatasetMeta(i);\n\n      if (!chart.isDatasetVisible(i) || !matchID(meta)) {\n        return;\n      }\n\n      d.data.forEach(function (value, j) {\n        if (value == null || meta.data[j].hidden) {\n          return;\n        }\n\n        var stats = asValueStats(value, minStats, maxStats, _this.options.ticks);\n        var minValue;\n        var maxValue;\n\n        if (stats) {\n          minValue = stats[minStats];\n          maxValue = stats[maxStats];\n        } else {\n          // if stats are not available use the plain value\n          var parsed = +_this.getRightValue(value);\n\n          if (isNaN(parsed)) {\n            return;\n          }\n\n          minValue = maxValue = parsed;\n        }\n\n        if (_this.min === null || minValue < _this.min) {\n          _this.min = minValue;\n        }\n\n        if (_this.max === null || maxValue > _this.max) {\n          _this.max = maxValue;\n        }\n\n        if (extraCallback) {\n          extraCallback(stats);\n        }\n      });\n    });\n  }\n  function rnd(seed) {\n    // Adapted from http://indiegamr.com/generate-repeatable-random-numbers-in-js/\n    if (seed === undefined) {\n      seed = Date.now();\n    }\n\n    return function () {\n      seed = (seed * 9301 + 49297) % 233280;\n      return seed / 233280;\n    };\n  }\n\n  var defaults = _objectSpread2({}, Chart.defaults.global.elements.rectangle, {\n    borderWidth: 1,\n    outlierRadius: 2,\n    outlierColor: Chart.defaults.global.elements.rectangle.backgroundColor,\n    medianColor: null,\n    itemRadius: 0,\n    itemStyle: 'circle',\n    itemBackgroundColor: Chart.defaults.global.elements.rectangle.backgroundColor,\n    itemBorderColor: Chart.defaults.global.elements.rectangle.borderColor,\n    hitPadding: 2,\n    outlierHitRadius: 4,\n    tooltipDecimals: 2\n  });\n  var ArrayElementBase = Chart.Element.extend({\n    isVertical: function isVertical() {\n      return this._view.width !== undefined;\n    },\n    draw: function draw() {// abstract\n    },\n    _drawItems: function _drawItems(vm, container, ctx, vert) {\n      if (vm.itemRadius <= 0 || !container.items || container.items.length <= 0) {\n        return;\n      }\n\n      ctx.save();\n      ctx.strokeStle = vm.itemBorderColor;\n      ctx.fillStyle = vm.itemBackgroundColor; // jitter based on random data\n      // use the datesetindex and index to initialize the random number generator\n\n      var random = rnd(this._datasetIndex * 1000 + this._index);\n\n      if (vert) {\n        container.items.forEach(function (v) {\n          Chart.canvasHelpers.drawPoint(ctx, vm.itemStyle, vm.itemRadius, vm.x - vm.width / 2 + random() * vm.width, v);\n        });\n      } else {\n        container.items.forEach(function (v) {\n          Chart.canvasHelpers.drawPoint(ctx, vm.itemStyle, vm.itemRadius, v, vm.y - vm.height / 2 + random() * vm.height);\n        });\n      }\n\n      ctx.restore();\n    },\n    _drawOutliers: function _drawOutliers(vm, container, ctx, vert) {\n      if (vm.outlierRadius <= 0 || !container.outliers || container.outliers.length === 0) {\n        return;\n      }\n\n      ctx.fillStyle = vm.outlierColor;\n      ctx.beginPath();\n\n      if (vert) {\n        container.outliers.forEach(function (v) {\n          ctx.arc(vm.x, v, vm.outlierRadius, 0, Math.PI * 2);\n        });\n      } else {\n        container.outliers.forEach(function (v) {\n          ctx.arc(v, vm.y, vm.outlierRadius, 0, Math.PI * 2);\n        });\n      }\n\n      ctx.fill();\n      ctx.closePath();\n    },\n    _getBounds: function _getBounds() {\n      // abstract\n      return {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n      };\n    },\n    _getHitBounds: function _getHitBounds() {\n      var padding = this._view.hitPadding;\n\n      var b = this._getBounds();\n\n      return {\n        left: b.left - padding,\n        top: b.top - padding,\n        right: b.right + padding,\n        bottom: b.bottom + padding\n      };\n    },\n    height: function height() {\n      return 0; // abstract\n    },\n    inRange: function inRange(mouseX, mouseY) {\n      if (!this._view) {\n        return false;\n      }\n\n      return this._boxInRange(mouseX, mouseY) || this._outlierIndexInRange(mouseX, mouseY) >= 0;\n    },\n    inLabelRange: function inLabelRange(mouseX, mouseY) {\n      if (!this._view) {\n        return false;\n      }\n\n      var bounds = this._getHitBounds();\n\n      if (this.isVertical()) {\n        return mouseX >= bounds.left && mouseX <= bounds.right;\n      }\n\n      return mouseY >= bounds.top && mouseY <= bounds.bottom;\n    },\n    inXRange: function inXRange(mouseX) {\n      var bounds = this._getHitBounds();\n\n      return mouseX >= bounds.left && mouseX <= bounds.right;\n    },\n    inYRange: function inYRange(mouseY) {\n      var bounds = this._getHitBounds();\n\n      return mouseY >= bounds.top && mouseY <= bounds.bottom;\n    },\n    _outlierIndexInRange: function _outlierIndexInRange(mouseX, mouseY) {\n      var vm = this._view;\n      var hitRadius = vm.outlierHitRadius;\n\n      var outliers = this._getOutliers();\n\n      var vertical = this.isVertical(); // check if along the outlier line\n\n      if (vertical && Math.abs(mouseX - vm.x) > hitRadius || !vertical && Math.abs(mouseY - vm.y) > hitRadius) {\n        return -1;\n      }\n\n      var toCompare = vertical ? mouseY : mouseX;\n\n      for (var i = 0; i < outliers.length; i++) {\n        if (Math.abs(outliers[i] - toCompare) <= hitRadius) {\n          return i;\n        }\n      }\n\n      return -1;\n    },\n    _boxInRange: function _boxInRange(mouseX, mouseY) {\n      var bounds = this._getHitBounds();\n\n      return mouseX >= bounds.left && mouseX <= bounds.right && mouseY >= bounds.top && mouseY <= bounds.bottom;\n    },\n    getCenterPoint: function getCenterPoint() {\n      var _this$_view = this._view,\n          x = _this$_view.x,\n          y = _this$_view.y;\n      return {\n        x: x,\n        y: y\n      };\n    },\n    getArea: function getArea() {\n      return 0; // abstract\n    },\n    _getOutliers: function _getOutliers() {\n      return []; // abstract\n    },\n    tooltipPosition: function tooltipPosition(eventPosition, tooltip) {\n      if (!eventPosition) {\n        // fallback\n        return this.getCenterPoint();\n      }\n\n      delete tooltip._tooltipOutlier;\n      var vm = this._view;\n\n      var index = this._outlierIndexInRange(eventPosition.x, eventPosition.y);\n\n      if (index < 0) {\n        return this.getCenterPoint();\n      }\n\n      tooltip._tooltipOutlier = index;\n\n      if (this.isVertical()) {\n        return {\n          x: vm.x,\n          y: this._getOutliers()[index]\n        };\n      }\n\n      return {\n        x: this._getOutliers()[index],\n        y: vm.y\n      };\n    }\n  });\n\n  Chart.defaults.global.elements.boxandwhiskers = _objectSpread2({}, defaults);\n\n  function transitionBoxPlot(start, view, model, ease) {\n    var keys = Object.keys(model);\n\n    for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {\n      var key = _keys[_i];\n      var target = model[key];\n      var origin = start[key];\n\n      if (origin === target) {\n        continue;\n      }\n\n      if (typeof target === 'number') {\n        view[key] = origin + (target - origin) * ease;\n        continue;\n      }\n\n      if (Array.isArray(target)) {\n        var v = view[key];\n        var common = Math.min(target.length, origin.length);\n\n        for (var i = 0; i < common; ++i) {\n          v[i] = origin[i] + (target[i] - origin[i]) * ease;\n        }\n      }\n    }\n  }\n\n  var BoxAndWiskers = Chart.elements.BoxAndWhiskers = ArrayElementBase.extend({\n    transition: function transition(ease) {\n      var r = Chart.Element.prototype.transition.call(this, ease);\n      var model = this._model;\n      var start = this._start;\n      var view = this._view; // No animation -> No Transition\n\n      if (!model || ease === 1) {\n        return r;\n      }\n\n      if (start.boxplot == null) {\n        return r; // model === view -> not copied\n      } // create deep copy to avoid alternation\n\n\n      if (model.boxplot === view.boxplot) {\n        view.boxplot = Chart.helpers.clone(view.boxplot);\n      }\n\n      transitionBoxPlot(start.boxplot, view.boxplot, model.boxplot, ease);\n      return r;\n    },\n    draw: function draw() {\n      var ctx = this._chart.ctx;\n      var vm = this._view;\n      var boxplot = vm.boxplot;\n      var vert = this.isVertical();\n\n      this._drawItems(vm, boxplot, ctx, vert);\n\n      ctx.save();\n      ctx.fillStyle = vm.backgroundColor;\n      ctx.strokeStyle = vm.borderColor;\n      ctx.lineWidth = vm.borderWidth;\n\n      this._drawBoxPlot(vm, boxplot, ctx, vert);\n\n      this._drawOutliers(vm, boxplot, ctx, vert);\n\n      ctx.restore();\n    },\n    _drawBoxPlot: function _drawBoxPlot(vm, boxplot, ctx, vert) {\n      if (vert) {\n        this._drawBoxPlotVert(vm, boxplot, ctx);\n      } else {\n        this._drawBoxPlotHoriz(vm, boxplot, ctx);\n      }\n    },\n    _drawBoxPlotVert: function _drawBoxPlotVert(vm, boxplot, ctx) {\n      var x = vm.x;\n      var width = vm.width;\n      var x0 = x - width / 2; // Draw the q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.fillRect(x0, boxplot.q1, width, boxplot.q3 - boxplot.q1);\n      } else {\n        ctx.fillRect(x0, boxplot.q3, width, boxplot.q1 - boxplot.q3);\n      } // Draw the median line\n\n\n      ctx.save();\n\n      if (vm.medianColor) {\n        ctx.strokeStyle = vm.medianColor;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(x0, boxplot.median);\n      ctx.lineTo(x0 + width, boxplot.median);\n      ctx.closePath();\n      ctx.stroke();\n      ctx.restore(); // Draw the border around the main q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.strokeRect(x0, boxplot.q1, width, boxplot.q3 - boxplot.q1);\n      } else {\n        ctx.strokeRect(x0, boxplot.q3, width, boxplot.q1 - boxplot.q3);\n      } // Draw the whiskers\n\n\n      ctx.beginPath();\n      ctx.moveTo(x0, boxplot.whiskerMin);\n      ctx.lineTo(x0 + width, boxplot.whiskerMin);\n      ctx.moveTo(x, boxplot.whiskerMin);\n      ctx.lineTo(x, boxplot.q1);\n      ctx.moveTo(x0, boxplot.whiskerMax);\n      ctx.lineTo(x0 + width, boxplot.whiskerMax);\n      ctx.moveTo(x, boxplot.whiskerMax);\n      ctx.lineTo(x, boxplot.q3);\n      ctx.closePath();\n      ctx.stroke();\n    },\n    _drawBoxPlotHoriz: function _drawBoxPlotHoriz(vm, boxplot, ctx) {\n      var y = vm.y;\n      var height = vm.height;\n      var y0 = y - height / 2; // Draw the q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.fillRect(boxplot.q1, y0, boxplot.q3 - boxplot.q1, height);\n      } else {\n        ctx.fillRect(boxplot.q3, y0, boxplot.q1 - boxplot.q3, height);\n      } // Draw the median line\n\n\n      ctx.save();\n\n      if (vm.medianColor) {\n        ctx.strokeStyle = vm.medianColor;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(boxplot.median, y0);\n      ctx.lineTo(boxplot.median, y0 + height);\n      ctx.closePath();\n      ctx.stroke();\n      ctx.restore(); // Draw the border around the main q1>q3 box\n\n      if (boxplot.q3 > boxplot.q1) {\n        ctx.strokeRect(boxplot.q1, y0, boxplot.q3 - boxplot.q1, height);\n      } else {\n        ctx.strokeRect(boxplot.q3, y0, boxplot.q1 - boxplot.q3, height);\n      } // Draw the whiskers\n\n\n      ctx.beginPath();\n      ctx.moveTo(boxplot.whiskerMin, y0);\n      ctx.lineTo(boxplot.whiskerMin, y0 + height);\n      ctx.moveTo(boxplot.whiskerMin, y);\n      ctx.lineTo(boxplot.q1, y);\n      ctx.moveTo(boxplot.whiskerMax, y0);\n      ctx.lineTo(boxplot.whiskerMax, y0 + height);\n      ctx.moveTo(boxplot.whiskerMax, y);\n      ctx.lineTo(boxplot.q3, y);\n      ctx.closePath();\n      ctx.stroke();\n    },\n    _getBounds: function _getBounds() {\n      var vm = this._view;\n      var vert = this.isVertical();\n      var boxplot = vm.boxplot;\n\n      if (!boxplot) {\n        return {\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0\n        };\n      }\n\n      if (vert) {\n        var x = vm.x,\n            width = vm.width;\n        var x0 = x - width / 2;\n        return {\n          left: x0,\n          top: boxplot.whiskerMax,\n          right: x0 + width,\n          bottom: boxplot.whiskerMin\n        };\n      }\n\n      var y = vm.y,\n          height = vm.height;\n      var y0 = y - height / 2;\n      return {\n        left: boxplot.whiskerMin,\n        top: y0,\n        right: boxplot.whiskerMax,\n        bottom: y0 + height\n      };\n    },\n    height: function height() {\n      var vm = this._view;\n      return vm.base - Math.min(vm.boxplot.q1, vm.boxplot.q3);\n    },\n    getArea: function getArea() {\n      var vm = this._view;\n      var iqr = Math.abs(vm.boxplot.q3 - vm.boxplot.q1);\n\n      if (this.isVertical()) {\n        return iqr * vm.width;\n      }\n\n      return iqr * vm.height;\n    },\n    _getOutliers: function _getOutliers() {\n      return this._view.boxplot ? this._view.boxplot.outliers || [] : [];\n    }\n  });\n\n  Chart.defaults.global.elements.violin = _objectSpread2({\n    points: 100\n  }, defaults);\n\n  function transitionViolin(start, view, model, ease) {\n    var keys = Object.keys(model);\n\n    for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {\n      var key = _keys[_i];\n      var target = model[key];\n      var origin = start[key];\n\n      if (origin === target) {\n        continue;\n      }\n\n      if (typeof target === 'number') {\n        view[key] = origin + (target - origin) * ease;\n        continue;\n      }\n\n      if (key === 'coords') {\n        var v = view[key];\n        var common = Math.min(target.length, origin.length);\n\n        for (var i = 0; i < common; ++i) {\n          v[i].v = origin[i].v + (target[i].v - origin[i].v) * ease;\n          v[i].estimate = origin[i].estimate + (target[i].estimate - origin[i].estimate) * ease;\n        }\n      }\n    }\n  }\n\n  var Violin = Chart.elements.Violin = ArrayElementBase.extend({\n    transition: function transition(ease) {\n      var r = Chart.Element.prototype.transition.call(this, ease);\n      var model = this._model;\n      var start = this._start;\n      var view = this._view; // No animation -> No Transition\n\n      if (!model || ease === 1) {\n        return r;\n      }\n\n      if (start.violin == null) {\n        return r; // model === view -> not copied\n      } // create deep copy to avoid alternation\n\n\n      if (model.violin === view.violin) {\n        view.violin = Chart.helpers.clone(view.violin);\n      }\n\n      transitionViolin(start.violin, view.violin, model.violin, ease);\n      return r;\n    },\n    draw: function draw() {\n      var ctx = this._chart.ctx;\n      var vm = this._view;\n      var violin = vm.violin;\n      var vert = this.isVertical();\n\n      this._drawItems(vm, violin, ctx, vert);\n\n      ctx.save();\n      ctx.fillStyle = vm.backgroundColor;\n      ctx.strokeStyle = vm.borderColor;\n      ctx.lineWidth = vm.borderWidth;\n      var coords = violin.coords;\n      Chart.canvasHelpers.drawPoint(ctx, 'rectRot', 5, vm.x, vm.y);\n      ctx.stroke();\n      ctx.beginPath();\n\n      if (vert) {\n        var x = vm.x;\n        var width = vm.width;\n        var factor = width / 2 / violin.maxEstimate;\n        ctx.moveTo(x, violin.min);\n        coords.forEach(function (_ref) {\n          var v = _ref.v,\n              estimate = _ref.estimate;\n          ctx.lineTo(x - estimate * factor, v);\n        });\n        ctx.lineTo(x, violin.max);\n        ctx.moveTo(x, violin.min);\n        coords.forEach(function (_ref2) {\n          var v = _ref2.v,\n              estimate = _ref2.estimate;\n          ctx.lineTo(x + estimate * factor, v);\n        });\n        ctx.lineTo(x, violin.max);\n      } else {\n        var y = vm.y;\n        var height = vm.height;\n\n        var _factor = height / 2 / violin.maxEstimate;\n\n        ctx.moveTo(violin.min, y);\n        coords.forEach(function (_ref3) {\n          var v = _ref3.v,\n              estimate = _ref3.estimate;\n          ctx.lineTo(v, y - estimate * _factor);\n        });\n        ctx.lineTo(violin.max, y);\n        ctx.moveTo(violin.min, y);\n        coords.forEach(function (_ref4) {\n          var v = _ref4.v,\n              estimate = _ref4.estimate;\n          ctx.lineTo(v, y + estimate * _factor);\n        });\n        ctx.lineTo(violin.max, y);\n      }\n\n      ctx.stroke();\n      ctx.fill();\n      ctx.closePath();\n\n      this._drawOutliers(vm, violin, ctx, vert);\n\n      ctx.restore();\n    },\n    _getBounds: function _getBounds() {\n      var vm = this._view;\n      var vert = this.isVertical();\n      var violin = vm.violin;\n\n      if (vert) {\n        var x = vm.x,\n            width = vm.width;\n        var x0 = x - width / 2;\n        return {\n          left: x0,\n          top: violin.max,\n          right: x0 + width,\n          bottom: violin.min\n        };\n      }\n\n      var y = vm.y,\n          height = vm.height;\n      var y0 = y - height / 2;\n      return {\n        left: violin.min,\n        top: y0,\n        right: violin.max,\n        bottom: y0 + height\n      };\n    },\n    height: function height() {\n      var vm = this._view;\n      return vm.base - Math.min(vm.violin.min, vm.violin.max);\n    },\n    getArea: function getArea() {\n      var vm = this._view;\n      var iqr = Math.abs(vm.violin.max - vm.violin.min);\n\n      if (this.isVertical()) {\n        return iqr * vm.width;\n      }\n\n      return iqr * vm.height;\n    },\n    _getOutliers: function _getOutliers() {\n      return this._view.violin.outliers || [];\n    }\n  });\n\n  var verticalDefaults = {\n    scales: {\n      yAxes: [{\n        type: 'arrayLinear'\n      }]\n    }\n  };\n  var horizontalDefaults = {\n    scales: {\n      xAxes: [{\n        type: 'arrayLinear'\n      }]\n    }\n  };\n  function toFixed(value) {\n    var decimals = this._chart.config.options.tooltipDecimals; // inject number of decimals from config\n\n    if (decimals == null || typeof decimals !== 'number' || decimals < 0) {\n      return value;\n    }\n\n    return Number.parseFloat(value).toFixed(decimals);\n  }\n  var configKeys = ['outlierRadius', 'itemRadius', 'itemStyle', 'itemBackgroundColor', 'itemBorderColor', 'outlierColor', 'medianColor', 'hitPadding', 'outlierHitRadius'];\n  var configKeyIsColor = [false, false, false, true, true, true, true, false, false];\n  var array = {\n    _elementOptions: function _elementOptions() {\n      return {};\n    },\n    updateElement: function updateElement(elem, index, reset) {\n      var dataset = this.getDataset();\n      var custom = elem.custom || {};\n\n      var options = this._elementOptions();\n\n      Chart.controllers.bar.prototype.updateElement.call(this, elem, index, reset);\n      var resolve = Chart.helpers.options.resolve; // Scriptable options\n\n      var context = {\n        chart: this.chart,\n        dataIndex: index,\n        dataset: dataset,\n        datasetIndex: this.index\n      };\n      configKeys.forEach(function (item) {\n        elem._model[item] = resolve([custom[item], dataset[item], options[item]], context, index);\n      });\n    },\n    _calculateCommonModel: function _calculateCommonModel(r, data, container, scale) {\n      if (container.outliers) {\n        r.outliers = container.outliers.map(function (d) {\n          return scale.getPixelForValue(Number(d));\n        });\n      }\n\n      if (Array.isArray(data)) {\n        r.items = data.map(function (d) {\n          return scale.getPixelForValue(Number(d));\n        });\n      } else if (container.items) {\n        r.items = container.items.map(function (d) {\n          return scale.getPixelForValue(Number(d));\n        });\n      }\n    },\n    setHoverStyle: function setHoverStyle(element) {\n      Chart.controllers.bar.prototype.setHoverStyle.call(this, element);\n      var dataset = this.chart.data.datasets[element._datasetIndex];\n      var index = element._index;\n      var custom = element.custom || {};\n      var model = element._model;\n      var getHoverColor = Chart.helpers.getHoverColor;\n      var resolve = Chart.helpers.options.resolve;\n      configKeys.forEach(function (item, i) {\n        element.$previousStyle[item] = model[item];\n        var hoverKey = \"hover\".concat(item.charAt(0).toUpperCase()).concat(item.slice(1));\n        var modelValue = configKeyIsColor[i] && model[item] != null ? getHoverColor(model[item]) : model[item];\n        element._model[item] = resolve([custom[hoverKey], dataset[hoverKey], modelValue], undefined, index);\n      });\n    }\n  };\n\n  function boxplotTooltip(item, data) {\n    var value = data.datasets[item.datasetIndex].data[item.index];\n\n    var options = this._chart.getDatasetMeta(item.datasetIndex).controller._getValueScale().options.ticks;\n\n    var b = asBoxPlotStats(value, options);\n    var hoveredOutlierIndex = this._tooltipOutlier == null ? -1 : this._tooltipOutlier;\n    var label = this._options.callbacks.boxplotLabel;\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return label.apply(this, [item, data, b, hoveredOutlierIndex].concat(args));\n  }\n\n  var defaults$1 = {\n    tooltips: {\n      position: 'boxplot',\n      callbacks: {\n        label: boxplotTooltip,\n        boxplotLabel: function boxplotLabel(item, data, b, hoveredOutlierIndex) {\n          var datasetLabel = data.datasets[item.datasetIndex].label || '';\n          var label = \"\".concat(datasetLabel, \" \").concat(typeof item.xLabel === 'string' ? item.xLabel : item.yLabel);\n\n          if (!b) {\n            return \"\".concat(label, \" (NaN)\");\n          }\n\n          if (hoveredOutlierIndex >= 0) {\n            var outlier = b.outliers[hoveredOutlierIndex];\n            return \"\".concat(label, \" (outlier: \").concat(toFixed.call(this, outlier), \")\");\n          }\n\n          return \"\".concat(label, \" (min: \").concat(toFixed.call(this, b.min), \", q1: \").concat(toFixed.call(this, b.q1), \", median: \").concat(toFixed.call(this, b.median), \", q3: \").concat(toFixed.call(this, b.q3), \", max: \").concat(toFixed.call(this, b.max), \")\");\n        }\n      }\n    }\n  };\n  Chart.defaults.boxplot = Chart.helpers.merge({}, [Chart.defaults.bar, verticalDefaults, defaults$1]);\n  Chart.defaults.horizontalBoxplot = Chart.helpers.merge({}, [Chart.defaults.horizontalBar, horizontalDefaults, defaults$1]);\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.bar) {\n    Chart.defaults.global.datasets.boxplot = _objectSpread2({}, Chart.defaults.global.datasets.bar);\n  }\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.horizontalBar) {\n    Chart.defaults.global.datasets.horizontalBoxplot = _objectSpread2({}, Chart.defaults.global.datasets.horizontalBar);\n  }\n\n  var boxplot = _objectSpread2({}, array, {\n    dataElementType: Chart.elements.BoxAndWhiskers,\n    _elementOptions: function _elementOptions() {\n      return this.chart.options.elements.boxandwhiskers;\n    },\n\n    /**\n     * @private\n     */\n    _updateElementGeometry: function _updateElementGeometry(elem, index, reset) {\n      var _Chart$controllers$ba;\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n        args[_key2 - 3] = arguments[_key2];\n      }\n\n      (_Chart$controllers$ba = Chart.controllers.bar.prototype._updateElementGeometry).call.apply(_Chart$controllers$ba, [this, elem, index, reset].concat(args));\n\n      elem._model.boxplot = this._calculateBoxPlotValuesPixels(this.index, index);\n    },\n\n    /**\n     * @private\n     */\n    _calculateBoxPlotValuesPixels: function _calculateBoxPlotValuesPixels(datasetIndex, index) {\n      var scale = this._getValueScale();\n\n      var data = this.chart.data.datasets[datasetIndex].data[index];\n\n      if (!data) {\n        return null;\n      }\n\n      var v = asBoxPlotStats(data, scale.options.ticks);\n      var r = {};\n      Object.keys(v).forEach(function (key) {\n        if (key !== 'outliers' && key !== 'items') {\n          r[key] = scale.getPixelForValue(Number(v[key]));\n        }\n      });\n\n      this._calculateCommonModel(r, data, v, scale);\n\n      return r;\n    }\n  });\n  /**\n   * This class is based off controller.bar.js from the upstream Chart.js library\n   */\n\n\n  var BoxPlot = Chart.controllers.boxplot = Chart.controllers.bar.extend(boxplot);\n  var HorizontalBoxPlot = Chart.controllers.horizontalBoxplot = Chart.controllers.horizontalBar.extend(boxplot);\n\n  function violinTooltip(item, data) {\n    var value = data.datasets[item.datasetIndex].data[item.index];\n\n    var options = this._chart.getDatasetMeta(item.datasetIndex).controller._getValueScale().options.ticks;\n\n    var v = asViolinStats(value, options);\n    var label = this._options.callbacks.violinLabel;\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return label.apply(this, [item, data, v].concat(args));\n  }\n\n  var defaults$2 = {\n    tooltips: {\n      callbacks: {\n        label: violinTooltip,\n        violinLabel: function violinLabel(item, data) {\n          var datasetLabel = data.datasets[item.datasetIndex].label || '';\n          var value = item.value;\n          var label = \"\".concat(datasetLabel, \" \").concat(typeof item.xLabel === 'string' ? item.xLabel : item.yLabel);\n          return \"\".concat(label, \" (\").concat(toFixed.call(this, value), \")\");\n        }\n      }\n    }\n  };\n  Chart.defaults.violin = Chart.helpers.merge({}, [Chart.defaults.bar, verticalDefaults, defaults$2]);\n  Chart.defaults.horizontalViolin = Chart.helpers.merge({}, [Chart.defaults.horizontalBar, horizontalDefaults, defaults$2]);\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.bar) {\n    Chart.defaults.global.datasets.violin = _objectSpread2({}, Chart.defaults.global.datasets.bar);\n  }\n\n  if (Chart.defaults.global.datasets && Chart.defaults.global.datasets.horizontalBar) {\n    Chart.defaults.global.datasets.horizontalViolin = _objectSpread2({}, Chart.defaults.global.datasets.horizontalBar);\n  }\n\n  var controller = _objectSpread2({}, array, {\n    dataElementType: Chart.elements.Violin,\n    _elementOptions: function _elementOptions() {\n      return this.chart.options.elements.violin;\n    },\n\n    /**\n     * @private\n     */\n    _updateElementGeometry: function _updateElementGeometry(elem, index, reset) {\n      var _Chart$controllers$ba;\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n        args[_key2 - 3] = arguments[_key2];\n      }\n\n      (_Chart$controllers$ba = Chart.controllers.bar.prototype._updateElementGeometry).call.apply(_Chart$controllers$ba, [this, elem, index, reset].concat(args));\n\n      var custom = elem.custom || {};\n\n      var options = this._elementOptions();\n\n      elem._model.violin = this._calculateViolinValuesPixels(this.index, index, custom.points !== undefined ? custom.points : options.points);\n    },\n\n    /**\n     * @private\n     */\n    _calculateViolinValuesPixels: function _calculateViolinValuesPixels(datasetIndex, index, points) {\n      var scale = this._getValueScale();\n\n      var data = this.chart.data.datasets[datasetIndex].data[index];\n      var violin = asViolinStats(data, scale.options.ticks);\n\n      if (!Array.isArray(data) && typeof data === 'number' && !Number.isNaN || violin == null) {\n        return {\n          min: data,\n          max: data,\n          median: data,\n          coords: [{\n            v: data,\n            estimate: Number.NEGATIVE_INFINITY\n          }],\n          maxEstimate: Number.NEGATIVE_INFINITY\n        };\n      }\n\n      var range = violin.max - violin.min;\n      var samples = [];\n      var inc = range / points;\n\n      for (var v = violin.min; v <= violin.max && inc > 0; v += inc) {\n        samples.push(v);\n      }\n\n      if (samples[samples.length - 1] !== violin.max) {\n        samples.push(violin.max);\n      }\n\n      var coords = violin.coords || violin.kde(samples).map(function (v) {\n        return {\n          v: v[0],\n          estimate: v[1]\n        };\n      });\n      var r = {\n        min: scale.getPixelForValue(violin.min),\n        max: scale.getPixelForValue(violin.max),\n        median: scale.getPixelForValue(violin.median),\n        coords: coords.map(function (_ref) {\n          var v = _ref.v,\n              estimate = _ref.estimate;\n          return {\n            v: scale.getPixelForValue(v),\n            estimate: estimate\n          };\n        }),\n        maxEstimate: coords.reduce(function (a, d) {\n          return Math.max(a, d.estimate);\n        }, Number.NEGATIVE_INFINITY)\n      };\n\n      this._calculateCommonModel(r, data, violin, scale);\n\n      return r;\n    }\n  });\n  /**\n   * This class is based off controller.bar.js from the upstream Chart.js library\n   */\n\n\n  var Violin$1 = Chart.controllers.violin = Chart.controllers.bar.extend(controller);\n  var HorizontalViolin = Chart.controllers.horizontalViolin = Chart.controllers.horizontalBar.extend(controller);\n\n  var helpers = Chart.helpers;\n  var ArrayLinearScaleOptions = helpers.merge({}, [commonScaleOptions, Chart.scaleService.getScaleDefaults('linear')]);\n  var ArrayLinearScale = Chart.scaleService.getScaleConstructor('linear').extend({\n    getRightValue: function getRightValue$1(rawValue) {\n      return Chart.LinearScaleBase.prototype.getRightValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    _parseValue: function _parseValue(rawValue) {\n      return Chart.LinearScaleBase.prototype._parseValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    determineDataLimits: function determineDataLimits() {\n      commonDataLimits.call(this); // Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\n\n      this.handleTickRangeOptions();\n    }\n  });\n  Chart.scaleService.registerScaleType('arrayLinear', ArrayLinearScale, ArrayLinearScaleOptions);\n\n  var helpers$1 = Chart.helpers;\n  var ArrayLogarithmicScaleOptions = helpers$1.merge({}, [commonScaleOptions, Chart.scaleService.getScaleDefaults('logarithmic')]);\n  var ArrayLogarithmicScale = Chart.scaleService.getScaleConstructor('logarithmic').extend({\n    getRightValue: function getRightValue$1(rawValue) {\n      return Chart.LinearScaleBase.prototype.getRightValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    _parseValue: function _parseValue(rawValue) {\n      return Chart.LinearScaleBase.prototype._parseValue.call(this, getRightValue(rawValue, this.options.ticks));\n    },\n    determineDataLimits: function determineDataLimits() {\n      var _this = this;\n\n      // Add whitespace around bars. Axis shouldn't go exactly from min to max\n      var tickOpts = this.options.ticks;\n      this.minNotZero = null;\n      commonDataLimits.call(this, function (boxPlot) {\n        var value = boxPlot[tickOpts.minStats];\n\n        if (value !== 0 && (_this.minNotZero === null || value < _this.minNotZero)) {\n          _this.minNotZero = value;\n        }\n      });\n      this.min = helpers$1.valueOrDefault(tickOpts.min, this.min - this.min * 0.05);\n      this.max = helpers$1.valueOrDefault(tickOpts.max, this.max + this.max * 0.05);\n\n      if (this.min === this.max) {\n        if (this.min !== 0 && this.min !== null) {\n          this.min = Math.pow(10, Math.floor(helpers$1.log10(this.min)) - 1);\n          this.max = Math.pow(10, Math.floor(helpers$1.log10(this.max)) + 1);\n        } else {\n          this.min = 1;\n          this.max = 10;\n        }\n      }\n    }\n  });\n  Chart.scaleService.registerScaleType('arrayLogarithmic', ArrayLogarithmicScale, ArrayLogarithmicScaleOptions);\n\n  function boxplotPositioner(elements, eventPosition) {\n    var _this = this;\n\n    if (!elements.length) {\n      return false;\n    }\n\n    var _elements$reduce = elements.reduce(function (_ref, el) {\n      var _ref2 = _slicedToArray(_ref, 3),\n          xi = _ref2[0],\n          ci = _ref2[1],\n          counti = _ref2[2];\n\n      if (el && el.hasValue()) {\n        var pos = el.tooltipPosition(eventPosition, _this);\n        return [xi + pos.x, ci + pos.y, counti + 1];\n      }\n\n      return [xi, ci, counti];\n    }, [0, 0, 0]),\n        _elements$reduce2 = _slicedToArray(_elements$reduce, 3),\n        x = _elements$reduce2[0],\n        y = _elements$reduce2[1],\n        count = _elements$reduce2[2];\n\n    return {\n      x: x / count,\n      y: y / count\n    };\n  }\n  Chart.Tooltip.positioners.boxplot = boxplotPositioner;\n\n  exports.ArrayLinearScale = ArrayLinearScale;\n  exports.ArrayLogarithmicScale = ArrayLogarithmicScale;\n  exports.BoxAndWhiskers = BoxAndWiskers;\n  exports.BoxPlot = BoxPlot;\n  exports.HorizontalBoxPlot = HorizontalBoxPlot;\n  exports.HorizontalViolin = HorizontalViolin;\n  exports.Violin = Violin;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}